import{r as o,a as g,w as l,i as x,o as c,b as t,e as S,f as s,h as v,g as _,t as U}from"./index-BDwCyq8B.js";import{V as w,e as p,a as N,d as V}from"./VContainer-CJF3WIPt.js";import{V as y}from"./VTextField-DYjoSyYg.js";import"./autofocus-BJl7AHMN.js";async function D({name:k,email:r,pdfBase64:n}){return{id:"mock-sign-123",recipients:[{sign_url:"https://sandbox.signaturit.com/sign/mock"}]}}const E={key:1,class:"mt-4"},P={__name:"SignatureSignaturit",setup(k){const r=o("Usuario Demo"),n=o("demo@example.com"),m=o(!1),u=o(null),i=o(null);function b(a){return btoa(unescape(encodeURIComponent(a)))}const B=async()=>{m.value=!0,u.value=null,i.value=null;try{const a=b("PDF_PLACEHOLDER"),e=await D({name:r.value,email:n.value,pdfBase64:a});i.value=e.recipients?.[0]?.sign_url||null}catch(a){u.value=a.message||String(a)}finally{m.value=!1}},f=x(),C=()=>{window.history.length>1?f.back():f.push("/")};return(a,e)=>(c(),g(w,{class:"py-6"},{default:l(()=>[t(p,{text:"",onClick:C,class:"mr-2"},{default:l(()=>[...e[2]||(e[2]=[s("Back",-1)])]),_:1}),e[6]||(e[6]=S("h2",null,"Firma (Signaturit)",-1)),t(N,{class:"pa-4"},{default:l(()=>[t(y,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=d=>r.value=d),label:"Nombre completo"},null,8,["modelValue"]),t(y,{modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=d=>n.value=d),label:"Email",type:"email"},null,8,["modelValue"]),t(p,{color:"primary",loading:m.value,onClick:B},{default:l(()=>[...e[3]||(e[3]=[s("Crear solicitud",-1)])]),_:1},8,["loading"]),u.value?(c(),g(V,{key:0,type:"error",class:"mt-4"},{default:l(()=>[s(U(u.value),1)]),_:1})):v("",!0),i.value?(c(),_("div",E,[t(V,{type:"success",class:"mb-2"},{default:l(()=>[...e[4]||(e[4]=[s("Solicitud creada",-1)])]),_:1}),t(p,{href:i.value,target:"_blank",color:"secondary"},{default:l(()=>[...e[5]||(e[5]=[s("Abrir URL de firma",-1)])]),_:1},8,["href"])])):v("",!0)]),_:1})]),_:1}))}};export{P as default};
